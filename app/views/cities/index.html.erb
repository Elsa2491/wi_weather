<%= @output %>


<script>
  let queryUrl = 'https://api.openweathermap.org/data/2.5/onecall?';
  let lat = 'lat=48.856614&';
  let long = 'lon=2.3522219&';
  let apiOptions = 'lang=fr&units=metric&exclude=minutely,alerts&';
  let apiKey = 'id=524901&appid=ee281cfabf1ec4cff7712dacc69ff59f';
  let file = queryUrl + lat + long + apiOptions + apiKey;

  fetch(file)
  .then((response) => response.json())
  .then((data) => {
    console.log(data);

    // Weather main data
    let city = data.timezone;
    console.log(city);
    let description = data.current.weather[0].description;
    console.log(description);
    let temp = Math.round(data.current.temp);
    console.log('Température : ', temp);
    let minTemp = Math.round(data.daily[0].temp.min);
    console.log('Min : ', minTemp);
    let maxTemp = Math.round(data.daily[0].temp.max);
    console.log('Max : ', maxTemp);
    let feelLike = Math.round(data.current.feels_like);
    console.log('Ressenti : ', feelLike);
    let humidity = data.current.humidity;
    console.log('Humidité : ', humidity);

    // Weather hourly data
    let hourNow = Math.round(data.hourly[0].temp);
    // console.log(hourNow);
    let oneHourAfterNow = Math.round(data.hourly[1].temp);
    // console.log(oneHourAfterNow);
    let twoHoursAfterNow = Math.round(data.hourly[2].temp);
    // console.log(twoHoursAfterNow);
    let threeHoursAfterNow = Math.round(data.hourly[3].temp);
    // console.log(threeHoursAfterNow);
    let fourHoursAfterNow = Math.round(data.hourly[4].temp);
    // console.log(fourHoursAfterNow);
    let fiveHoursAfterNow = Math.round(data.hourly[5].temp);
    // console.log(fiveHoursAfterNow);
    let sixHoursAfterNow = Math.round(data.hourly[6].temp);
    // console.log(sixHoursAfterNow);


    // Weather daily data
    let tomorrowTemp = Math.round(data.daily[1].temp.day);
    console.log('Demain : ', tomorrowTemp);
    let afterTomorrowTemp = Math.round(data.daily[2].temp.day);
    console.log('Après demain : ', afterTomorrowTemp);
    let threeDaysAfterNowTemp = Math.round(data.daily[3].temp.day);
    console.log('J+ 3 : ', threeDaysAfterNowTemp);
    let fourDaysAfterNowTemp = Math.round(data.daily[4].temp.day);
    console.log('J+ 4 : ', fourDaysAfterNowTemp);
  })
</script>
